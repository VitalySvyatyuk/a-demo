{% load i18n app_tags profiles_tags staticfiles %}
<h2 class="modal-title offset-bottom-5">{% trans "Authentication using mobile app" %}</h2>

<a class="close-reveal-modal icon cross" ng-click="cancel()"></a>

<form ng-submit="OTPBind()" class="row">

    <p class="text-center">{% trans "You can also use" %} <a class="bordered" ng-click="toSMS()">SMS</a> {% trans "for authentication" %}</p>
    <p class="offset-bottom-20 text-center font-med">{% trans "Please choose your mobile's system" %}:</p>

    <!-- ios -->
    <div class="modal-white-bg ios">
      <a class="title" slide-block="selected === 'ios'" ng-click="selected === 'ios'? selected = null : selected = 'ios'"><span>iOS</span></a>
      <div class="drop" content-block>
        <ol>
          <li>
            {% trans "Install the application on your mobile phone" %} <a href="https://itunes.apple.com/us/app/hde-otp-generator/id571240327">HDE OTP Generator </a>
          </li>
          <li class="clearfix">
            <div class="small-8 large-8 column">
                <p class="offset-bottom-20">{% trans "Open the app and create a new account using the following secret key" %}: <span class="code">[[OTPData.key]]</span></p>
                {% trans "or use the 'Scan' option of the app and point your mobile phone's camera at the QRCode below" %}:
            </div>
            <div class="small-4 large-4 column text-center">
                <img width="170px" ng-src="data:image/png;base64,[[OTPData.qr]]">
               <!-- <p class="icon-refresh-before"><a >Обновить</a></p> -->
            </div>
          </li>
          <li class="clearfix">
            <p>
            {% blocktrans %}
                Enter the code generated by the app in the following field
                (if the code doesn't match, please enable time correction in your app's settings):
            {% endblocktrans %}
            </p>
            <div class="small-8 large-8 column form-item">
                <input type="text" ng-disabled="isLoading" ng-model="OTPInfo.otp_token">
                <p class="error" ng-if="isTokenInvalid">{% trans "Invalid token, try again" %}</p>
            </div>
            <div class="small-4 large-4 column form-item text-center">
                <button class="medium" type="submit" ng-disabled="isLoading">{% trans "Make binding" %}</button>
            </div>
          </li>
        </ol>
      </div>
    </div>
    <!-- ios end -->

    <!-- windows -->
    <div class="modal-white-bg windows">
      <a class="title" slide-block="selected === 'win'" ng-click="selected === 'win'? selected = null : selected = 'win'"><span>Windows Phone 7/8</span></a>
      <div class="drop" content-block>
        <ol>
          <li>
            {% trans "Install the application on your mobile phone" %} <a href="http://www.windowsphone.com/en-us/store/app/authenticator/e7994dbc-2336-4950-91ba-ca22d653759b">Microsoft Authenticator </a>
          </li>
          <li class="clearfix">
            <div class="small-8 large-8 column">
                <p class="offset-bottom-20">{% trans "Open the app and create a new account using the following secret key" %}: <span class="code">[[OTPData.key]]</span></p>
                {% trans "or use the 'Scan' option of the app and point your mobile phone's camera at the QRCode below" %}:
            </div>
            <div class="small-4 large-4 column text-center">
                <img width="170px" ng-src="data:image/png;base64,[[OTPData.qr]]">
                <!-- <p class="icon-refresh-before"><a href="#">Обновить</a></p> -->
            </div>
          </li>
          <li class="clearfix">
            <p>
            {% blocktrans %}
                Enter the code generated by the app in the following field
                (if the code doesn't match, please enable time correction in your app's settings):
            {% endblocktrans %}
            </p>
            <div class="small-8 large-8 column form-item">
                <input type="text" ng-disabled="isLoading" ng-model="OTPInfo.otp_token">
                <p class="error" ng-if="isTokenInvalid">{% trans "Invalid token, try again" %}</p>
            </div>
            <div class="small-4 large-4 column form-item text-center">
                <button class="medium" type="submit" ng-disabled="isLoading">{% trans "Make binding" %}</button>
            </div>
          </li>
        </ol>
      </div>
    </div>
    <!-- windows end -->

    <!-- android -->
    <div class="modal-white-bg android">
      <a class="title" slide-block="selected === 'android'" ng-click="selected === 'android'? selected = null : selected = 'android'"><span>Android</span></a>
      <div class="drop" content-block>
        <ol>
          <li>
            {% trans "Install the application on your mobile phone" %} <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2">Google Authenticator</a>
          </li>
          <li class="clearfix">
            <div class="large-8 column">
                <p class="offset-bottom-20">{% trans "Open the app and create a new account using the following secret key" %}: <span class="code">[[OTPData.key]]</span></p>
                {% trans "or use the 'Scan' option of the app and point your mobile phone's camera at the QRCode below" %}:
            </div>
            <div class="large-4 column text-center">
                <img width="170px" ng-src="data:image/png;base64,[[OTPData.qr]]">
               <!-- <p class="icon-refresh-before"><a href="#">Обновить</a></p> -->
            </div>
          </li>
          <li class="clearfix">
            <p>
            {% blocktrans %}
                Enter the code generated by the app in the following field
                (if the code doesn't match, please enable time correction in your app's settings):
            {% endblocktrans %}
            </p>
            <div class="large-8 column form-item">
                <input type="text" ng-disabled="isLoading" ng-model="OTPInfo.otp_token">
                <p class="error" ng-if="isTokenInvalid">{% trans "Invalid token, try again" %}</p>
            </div>
            <div class="large-4 column form-item text-center">
                <button class="medium" type="submit" ng-disabled="isLoading">{% trans "Make binding" %}</button>
            </div>
          </li>
        </ol>
      </div>
    </div>
    <!-- android end -->

</form>

